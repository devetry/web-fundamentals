<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>Assignment: Web Caesar :: Unit 2: Web Fundamentals</title>

        <link rel="stylesheet" href="/css/bootstrap.min.css">
        <link rel="stylesheet" href="/css/highlight.launchcode.css">
        <link rel="stylesheet" href="/css/main.css">
        <link rel="stylesheet" href="https://djwbyvgln9kts.cloudfront.net/launch_ed_style/custom.css">
    </head>
    <body>

        <header class="navbar navbar-default navbar-fixed-top">

            <ul class="nav navbar-nav">

                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle glyphicon glyphicon-menu-hamburger" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"></a>
                        <ul class="dropdown-menu">
                                                            <li class=" lc-button">
                                    <a href="/classes/">
                                        Classes
                                    </a>
                                </li>
                                                            <li class=" lc-button">
                                    <a href="/studios/">
                                        Studios
                                    </a>
                                </li>
                                                            <li class=" lc-button">
                                    <a href="/tutorials/">
                                        Tutorials
                                    </a>
                                </li>
                                                            <li class="active lc-button">
                                    <a href="/assignments/">
                                        Assignments
                                    </a>
                                </li>
                                                            <li class=" lc-button">
                                    <a href="/videos/">
                                        Videos
                                    </a>
                                </li>
                                                            <li class=" lc-button">
                                    <a href="/cheatsheets/">
                                        Cheatsheets
                                    </a>
                                </li>
                                                            <li class=" lc-button">
                                    <a href="/objectives/">
                                        Objectives
                                    </a>
                                </li>
                                                            <li class=" lc-button">
                                    <a href="/issues/">
                                        Issues
                                    </a>
                                </li>
                                                            <li class=" lc-button">
                                    <a href="/about/">
                                        About this Unit
                                    </a>
                                </li>
                                                        <li role="separator" class="divider"></li>
                            <li>
                                <a href="#modalSearch" data-toggle="modal" data-target="#modalSearch">Search This Site</a>
                            </li>
                        </ul>
                    </li>

                
            </ul>


            <div>
                <a class="navbar-brand site-title navbar-center" href="/">
                    <h1>Unit 2: Web Fundamentals</h1>
                </a>
            </div>

            <div class="nav navbar-nav navbar-right">
                <a class="navbar-brand dabomb" href="/"></a>
            </div>

        </header>

        <nav style="position:absolute; width: 180px; margin-top:64px">
            <ul class="nav navbar-big-nav hidden-md hidden-sm hidden-xs">
                                                            <li class=" lc-button">
                            <a href="/classes/">
                                Classes
                            </a>
                        </li>
                                            <li class=" lc-button">
                            <a href="/studios/">
                                Studios
                            </a>
                        </li>
                                            <li class=" lc-button">
                            <a href="/tutorials/">
                                Tutorials
                            </a>
                        </li>
                                            <li class="active lc-button">
                            <a href="/assignments/">
                                Assignments
                            </a>
                        </li>
                                            <li class=" lc-button">
                            <a href="/videos/">
                                Videos
                            </a>
                        </li>
                                            <li class=" lc-button">
                            <a href="/cheatsheets/">
                                Cheatsheets
                            </a>
                        </li>
                                            <li class=" lc-button">
                            <a href="/objectives/">
                                Objectives
                            </a>
                        </li>
                                            <li class=" lc-button">
                            <a href="/issues/">
                                Issues
                            </a>
                        </li>
                                            <li class=" lc-button">
                            <a href="/about/">
                                About this Unit
                            </a>
                        </li>
                                        <li role="separator" class="divider"></li>
                    <li>
                        <a href="#modalSearch" data-toggle="modal" data-target="#modalSearch">Search This Site</a>
                    </li>
                            </ul>
        </nav>


        <!-- Search Modal -->
        <div id="modalSearch" class="modal fade" role="dialog">
           <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                   <button type="button" class="close" data-dismiss="modal">&times;</button>
                   <h4 class="modal-title">Search Unit 2: Web Fundamentals</h4>
                </div>
                <div class="modal-body">
                    <script>
                      (function() {
                        var cx = "018398152828724587795:xxg-p_lz3vg";
                        var gcse = document.createElement('script');
                        gcse.type = 'text/javascript';
                        gcse.async = true;
                        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
                        var s = document.getElementsByTagName('script')[0];
                        s.parentNode.insertBefore(gcse, s);
                      })();
                    </script>
                    <gcse:search></gcse:search>
                </div>
                <div class="modal-footer">
                   <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>

           </div>
        </div>

        <main class="container-fluid">
            <div class="row">

                <section id="content" class="col-sm-offset-1 col-sm-10 col-md-offset-2 col-md-8">
                                        <h1>Assignment: Web Caesar</h1>
                    <p>In this assignment you'll implement a web-based version of the Caesar cipher that you wrote in Unit 1. It consists of the following sections:</p>
<ul>
<li><a href="#git-repository-setup">Git Repository Setup</a></li>
<li><a href="#creating-a-virtual-environment">Creating a Virtual Environment</a></li>
<li><a href="#setting-up-a-basic-flask-app">Setting up a basic Flask app</a></li>
<li><a href="#rendering-a-form">Rendering a form</a></li>
<li><a href="#importing-caesar-code">Importing caesar code</a></li>
<li><a href="#processing-the-form">Processing the form</a></li>
<li><a href="#rendering-the-form-after-encryption">Rendering the form after encryption</a></li>
<li><a href="#committing-your-work">Committing Your Work</a></li>
</ul>
<p>Your final application will function just like our <a href="https://launchcode-demos.appspot.com/caesar">demo app</a>.</p>
<h2 id="project-and-repository-setup">Project and Repository Setup</h2>
<p>For this assignment, you will build the entire project from scratch. It is <strong>essential</strong> that you follow each of these steps <em>in order</em> and make sure that you are executing every command <strong>in the order shown below</strong>!</p>
<h3 id="git-repository-setup">Git repository setup</h3>
<p>From <code>~/lc101/</code>, create a new directory and initialize it as a Git repository.</p>
<pre><code class="language-nohighlight">$ mkdir web-caesar
$ cd web-caesar
$ git init
Initialized empty Git repository in /Users/chris/lc101/web-caesar/.git/</code></pre>
<p>Now let's connect our local Git repository to a remote repository at GitHub. Visit <a href="https://github.com/">github.com</a> and create a new repository from the menu at top-right.</p>
<img src="images/new-repo.png" style="width:400px;" />
<p>Name the repository <code>web-caesar</code> and add a Python-specific <code>.gitignore</code> file.</p>
<p><img src="images/repo-settings.png" alt="Repository Settings" /></p>
<p>After creating the repository, you'll be on the repository's home page. From there, copy the <em>Clone or Download</em> URL.</p>
<img src="images/clone-url.png" style="width:400px;" />
<p>Back in your terminal--be sure you're in the directory <code>~/lc101/web-caesar/</code>--connect your local repository to the new remote repository. Use your repository's url from GitHub, which should look like the one below (but obviously <strong>not</strong> with the username <code>chrisbay</code>).</p>
<pre><code class="language-nohighlight">$ git remote add origin https://github.com/chrisbay/web-caesar.git</code></pre>
<p>You can verify the status of remote repository connections at any time by running <code>git remote -v</code>.</p>
<pre><code class="language-nohighlight">$ git remote -v
origin  https://github.com/chrisbay/web-caesar.git (fetch)
origin  https://github.com/chrisbay/web-caesar.git (push)</code></pre>
<p>Next, pull the remote to your local so that you'll have the <code>.gitignore</code> file on your computer:</p>
<pre><code class="language-nohighlight">$ git pull origin master</code></pre>
<h3 id="creating-a-virtual-environment">Creating a virtual environment</h3>
<p>Next, let's create a new virtual environment. We'll use this same environment for all future Unit 2 assignments, so we will give it the generic name <code>flask-env</code>.</p>
<pre><code class="language-nohighlight">$ conda create -n flask-env
Fetching package metadata .........
Solving package specifications:
Package plan for installation in environment /Users/chris/miniconda3/envs/flask-env:

Proceed ([y]/n)? y

#
# To activate this environment, use:
# &gt; source activate flask-env
#
# To deactivate this environment, use:
# &gt; source deactivate flask-env
#</code></pre>
<aside class="aside-note">
<p>Your environment may be located in a different, global location if you installed Miniconda for all users of your computer.</p>
</aside>
<p>Now <strong>activate the environment</strong> and install Flask. If you don't activate the environment before installing Flask, when you go to run your program you will get the error: <code>ModuleNotFoundError: No module named ‘flask’</code>.</p>
<pre><code class="language-nohighlight">$ source activate flask-env
(flask-env) $ conda install flask
Fetching package metadata .........
Solving package specifications: .

Package plan for installation in environment /Users/chris/miniconda3/envs/flask-env:

The following NEW packages will be INSTALLED:

    click:        6.7-py36_0
    flask:        0.12.1-py36_0
    itsdangerous: 0.24-py36_0
    jinja2:       2.9.6-py36_0
    markupsafe:   0.23-py36_2
    openssl:      1.0.2k-2
    pip:          9.0.1-py36_1
    python:       3.6.1-2
    readline:     6.2-2
    setuptools:   27.2.0-py36_0
    sqlite:       3.13.0-0
    tk:           8.5.18-0
    werkzeug:     0.12.1-py36_0
    wheel:        0.29.0-py36_0
    xz:           5.2.2-1
    zlib:         1.2.8-3

Proceed ([y]/n)? y
(flask-env) $</code></pre>
<aside class="aside-warning">
<p>Windows Git Bash users should deactivate <code>flask-env</code> and close their terminal, then open a new Git Bash terminal, navigate to this directory again, and activate <code>flask-env</code> before proceeding with this assignment.    </p>
</aside>
<p>We'll have a single file in this project. Let's create it now.</p>
<pre><code class="language-nohighlight">(flask-env) $ touch main.py</code></pre>
<aside class="aside-warning">
<p>When done working on this project, don't forget to either deactivate the virtual environment using <code>source deactivate</code>, or close your terminal window.</p>
</aside>
<h2 id="your-tasks">Your Tasks</h2>
<p>Open up the project in VS Code to get started: <code>code .</code>.</p>
<h3 id="setting-up-a-basic-flask-app">Setting up a basic Flask app</h3>
<p>We can start with the basic outline of the Hello, World app that you created previously. Go ahead and <a href="../../tutorials/hello-flask/#building-a-web-application-line-by-line">grab the code from that tutorial</a>. We recommend typing this code line-by-line until you're familiar with what each piece does. In fact, this is a good time to review the line-by-line explanation in the Hello, World tutorial!</p>
<h3 id="rendering-a-form">Rendering a form</h3>
<p>Rather than display the &quot;Hello World&quot; message, we want our main view to display a form that looks like this.</p>
<p><img src="images/caesar-form.png" alt="Caesar Form" /></p>
<p>To do so, make a global variable named <code>form</code> above the <code>@app.route("/")</code>decorator preceding the <code>index</code> function, and set its value to be the HTML displayed here.</p>
<script src="https://gist.github.com/chrisbay/b67a34a89639786a42e38fdbd0b6f4b9.js"></script>
<aside class="aside-warning">
<p>Don't forget to enclose the form string in triple-quotes <code>"""</code> so it can take up multiple lines.</p>
</aside>
<p>Now, fill out the body of the HTML string with a form that has these characteristics:</p>
<ol>
<li>The form uses the <code>POST</code> method.</li>
<li>There are two inputs: a regular <code>input</code> with <code>type="text"</code> and a <code>textarea</code>.</li>
<li>Set <code>name="rot"</code> on the <code>input</code> element and <code>name="text"</code> on the <code>textarea</code>.</li>
<li>Has a label on the <code>input</code> element that looks something like the one in the screenshot above.</li>
<li>The <code>input</code> element has the default value of 0.</li>
<li>Has a submit button.</li>
</ol>
<p>In the <code>index</code> function, return the <code>form</code> variable.</p>
<p>Now, start up your app and test:</p>
<pre><code class="language-nohighlight">(flask-env) $ python main.py
 * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
 * Restarting with stat
 * Debugger is active!
 * Debugger PIN: 955-679-937</code></pre>
<p>You should see the form render, but submitting it will result in a &quot;Method Not Allowed&quot; error.</p>
<h3 id="importing-caesar-code">Importing caesar code</h3>
<p>Create a file for your Caesar cipher code: <code>touch caesar.py</code>. Now, copy and paste our <a href="https://gist.github.com/chrisbay/496880de24bba4f532ed03211eff7294">Caesar solution code</a> into this file.</p>
<p>Then, in <code>main.py</code>, import the <code>rotate_string</code> function from <code>caesar.py</code>:</p>
<pre><code class="language-python">from caesar import rotate_string</code></pre>
<p>We'll use this function in the next step.</p>
<h3 id="processing-the-form">Processing the form</h3>
<p>To process the form, define a new function <code>encrypt</code> in <code>main.py</code>. Add an <code>@app.route</code> decorator to configure the function to receive requests at the root path <code>"/"</code>, and with <code>methods=['POST']</code>.</p>
<p>When the form is submitted, the request will contain the parameters <code>rot</code> and <code>text</code>. In order to access these, we need Flask's <code>request</code> object. To import it, modify the topmost <code>import</code> statement to include this object.</p>
<pre><code class="language-python">from flask import Flask, request</code></pre>
<p>Within <code>encrypt</code>, store the values of these request parameters in local variables, converting data types as necessary. Then, encrypt the value of the <code>text</code> parameter using <code>rotate_string</code>. Return the encrypted string wrapped in <code>&lt;h1&gt;</code> tags, to be rendered in the browser.</p>
<p>Before embarking on our final task, start up the application and test that everything you've done so far works. This is also a good time to commit your changes to your local Git repo.</p>
<h3 id="rendering-the-form-after-encryption">Rendering the form after encryption</h3>
<p>Our final task will be to modify the request handler functions so that the form is displayed again even after submission, with the encrypted string in our <code>&lt;textarea&gt;</code>, as in our <a href="https://launchcode-demos.appspot.com/caesar">demo app</a>.</p>
<p>Look at your <code>encrypt</code> request handler function. Instead of returning the encrypted string, we want to insert it in the form. To do this, we need to specify within the global <code>form</code> string where the text should be inserted. We'll use Python's <a href="https://docs.python.org/3.6/library/stdtypes.html#str.format"><code>str.format</code> method</a> for this.</p>
<p>Let's make two modifications to the <code>form</code> variable:</p>
<ol>
<li>Add a placeholder <code>{0}</code> between the opening and closing <code>&lt;textarea&gt;</code> tags.</li>
<li>Where the CSS rules are defined, &quot;double up&quot; the curly braces, which will prevent the <code>str.format</code> method from interpreting the curly braces as defining a text placeholder. For example, one rule will look like this:
<pre><code class="language-css">textarea {{
  margin: 10px 0;
  width: 540px;
  height: 120px;
}}</code></pre></li>
</ol>
<p>Within each of <code>index</code> and <code>encrypt</code>, rather than return the form string, return <code>form.format(...)</code>. The argument to this method call should be the empty string in the case of <code>index</code>, and it should be the encrypted string in the case of <code>encrypt</code>.</p>
<p>Start up the application and test. Ensure that after submitting the form a first time, it is re-rendered with the encrypted string inside the text area.</p>
<h2 id="committing-your-work">Committing Your Work</h2>
<p>Let's wrap up by putting our file in the local Git repository. If you run <code>git status</code> you'll see that we have a directory that was created by Visual Studio Code.</p>
<pre><code class="language-nohighlight">$ git status
On branch master

Initial commit

Untracked files:
  (use "git add &lt;file&gt;..." to include in what will be committed)

    .vscode/
    main.py
    caesar.py

nothing added to commit but untracked files present (use "git add" to track)</code></pre>
<p>As before, we don't want to commit that <code>.vscode/</code> directory. So back in VS Code, add this line to the bottom of <code>.gitignore</code>:</p>
<pre><code class="language-nohighlight">.vscode/</code></pre>
<p>Then run <code>git status</code> again to see what's changed.</p>
<pre><code class="language-nohighlight">$ git status
On branch master

Initial commit

Untracked files:
  (use "git add &lt;file&gt;..." to include in what will be committed)

    .gitignore
    main.py
    caesar.py

nothing added to commit but untracked files present (use "git add" to track)</code></pre>
<p>Great! Now, add and commit the files.</p>
<pre><code class="language-nohighlight">(flask-env) $ git add .
(flask-env) $ git commit -m "Finish web caesar"
[master (root-commit) 05bc1ae] Finish web caesar
 2 files changed, 10 insertions(+)
 create mode 100644 .gitignore
 create mode 100644 main.py</code></pre>
<h2 id="sanity-check">Sanity Check</h2>
<p>Before turning in your work, make sure your application does the following:</p>
<ul>
<li>After starting up the Flask application, a form with <code>input</code> and <code>textarea</code> elements is rendered when visiting <code>http://127.0.0.1:5000/</code>.</li>
<li>Submitting the form with a rotation integer and message results in the encrypted text being displayed. For example, rotating &quot;The crow flies at midnight!&quot; by 13 gives &quot;Gur pebj syvrf ng zvqavtug!&quot;.</li>
<li>Rotation preserves spaces and punctuation.</li>
<li>Successively rotating by complementary amounts--e.g. 13 and 13, 10 and 16, 4 and 22, etc.--gives the same message that you started with.</li>
</ul>
<h2 id="submit">Submit</h2>
<p>To turn in your assignment and get credit, follow the standard assignment instructions in <a href="../">How to Submit</a>.</p>
                                    </section>

            </div>
        </main>

        <script type="text/javascript" src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
        <script type="text/javascript" src="/js/bootstrap.min.js"></script>
        <script type="text/javascript" src="/js/highlight.pack.js"></script>
        <script type="text/javascript" src="/js/libgif.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.5.3/vue.min.js"></script>

        <script>
            $(function() {
                $("section>h1").wrap('<div class="page-header" />');

                // Syntax highlighting
                hljs.configure({ displayLabels: true });
                hljs.initHighlightingOnLoad();
            });
        </script>
        <script>
            $(function() {
                if (!location.pathname.match(/class-prep/)) return;

                window.checkboxWatcher = new Vue({
                    el: '#content',
                    data: function() {
                        var storedValue = localStorage.getItem('completedChecks');
                        console.log('storedValue', storedValue);
                        var hydratedValue = storedValue ? JSON.parse(storedValue) : {};
                        return {
                            checks: hydratedValue,
                        };
                    },
                    watch: {
                        checks: {
                            handler: function() {
                                console.log('storing check state');
                                localStorage.setItem('completedChecks', JSON.stringify(this.checks));
                            },
                            deep: true,
                        },
                    },
                });
            });
        </script>
        
    </body>
</html>
