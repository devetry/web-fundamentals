<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>Studio: FlickList 3 :: Unit 2: Web Fundamentals</title>

        <link rel="stylesheet" href="/css/bootstrap.min.css">
        <link rel="stylesheet" href="/css/highlight.launchcode.css">
        <link rel="stylesheet" href="/css/main.css">
        <link rel="stylesheet" href="https://djwbyvgln9kts.cloudfront.net/launch_ed_style/custom.css">
    </head>
    <body>

        <header class="navbar navbar-default navbar-fixed-top">

            <ul class="nav navbar-nav">

                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle glyphicon glyphicon-menu-hamburger" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"></a>
                        <ul class="dropdown-menu">
                                                            <li class=" lc-button">
                                    <a href="/classes/">
                                        Classes
                                    </a>
                                </li>
                                                            <li class="active lc-button">
                                    <a href="/studios/">
                                        Studios
                                    </a>
                                </li>
                                                            <li class=" lc-button">
                                    <a href="/tutorials/">
                                        Tutorials
                                    </a>
                                </li>
                                                            <li class=" lc-button">
                                    <a href="/assignments/">
                                        Assignments
                                    </a>
                                </li>
                                                            <li class=" lc-button">
                                    <a href="/videos/">
                                        Videos
                                    </a>
                                </li>
                                                            <li class=" lc-button">
                                    <a href="/cheatsheets/">
                                        Cheatsheets
                                    </a>
                                </li>
                                                            <li class=" lc-button">
                                    <a href="/objectives/">
                                        Objectives
                                    </a>
                                </li>
                                                            <li class=" lc-button">
                                    <a href="/issues/">
                                        Issues
                                    </a>
                                </li>
                                                            <li class=" lc-button">
                                    <a href="/about/">
                                        About this Unit
                                    </a>
                                </li>
                                                        <li role="separator" class="divider"></li>
                            <li>
                                <a href="#modalSearch" data-toggle="modal" data-target="#modalSearch">Search This Site</a>
                            </li>
                        </ul>
                    </li>

                
            </ul>


            <div>
                <a class="navbar-brand site-title navbar-center" href="/">
                    <h1>Unit 2: Web Fundamentals</h1>
                </a>
            </div>

            <div class="nav navbar-nav navbar-right">
                <a class="navbar-brand dabomb" href="/"></a>
            </div>

        </header>

        <nav style="position:absolute; width: 180px; margin-top:64px">
            <ul class="nav navbar-big-nav hidden-md hidden-sm hidden-xs">
                                                            <li class=" lc-button">
                            <a href="/classes/">
                                Classes
                            </a>
                        </li>
                                            <li class="active lc-button">
                            <a href="/studios/">
                                Studios
                            </a>
                        </li>
                                            <li class=" lc-button">
                            <a href="/tutorials/">
                                Tutorials
                            </a>
                        </li>
                                            <li class=" lc-button">
                            <a href="/assignments/">
                                Assignments
                            </a>
                        </li>
                                            <li class=" lc-button">
                            <a href="/videos/">
                                Videos
                            </a>
                        </li>
                                            <li class=" lc-button">
                            <a href="/cheatsheets/">
                                Cheatsheets
                            </a>
                        </li>
                                            <li class=" lc-button">
                            <a href="/objectives/">
                                Objectives
                            </a>
                        </li>
                                            <li class=" lc-button">
                            <a href="/issues/">
                                Issues
                            </a>
                        </li>
                                            <li class=" lc-button">
                            <a href="/about/">
                                About this Unit
                            </a>
                        </li>
                                        <li role="separator" class="divider"></li>
                    <li>
                        <a href="#modalSearch" data-toggle="modal" data-target="#modalSearch">Search This Site</a>
                    </li>
                            </ul>
        </nav>


        <!-- Search Modal -->
        <div id="modalSearch" class="modal fade" role="dialog">
           <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                   <button type="button" class="close" data-dismiss="modal">&times;</button>
                   <h4 class="modal-title">Search Unit 2: Web Fundamentals</h4>
                </div>
                <div class="modal-body">
                    <script>
                      (function() {
                        var cx = "018398152828724587795:xxg-p_lz3vg";
                        var gcse = document.createElement('script');
                        gcse.type = 'text/javascript';
                        gcse.async = true;
                        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
                        var s = document.getElementsByTagName('script')[0];
                        s.parentNode.insertBefore(gcse, s);
                      })();
                    </script>
                    <gcse:search></gcse:search>
                </div>
                <div class="modal-footer">
                   <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>

           </div>
        </div>

        <main class="container-fluid">
            <div class="row">

                <section id="content" class="col-sm-offset-1 col-sm-10 col-md-offset-2 col-md-8">
                                        <h1>Studio: FlickList 3</h1>
                    <p>The big new concept for this studio is that of <em>validation</em>. Sometimes, the user submits data through a form that, for one reason or another, is not acceptable. In that case, we must tell them what they did wrong, and give them a chance to try again.</p>
<h2 id="walkthrough">Walkthrough</h2>
<p>If you want to code along with today's Walkthrough, simply <code>checkout</code> the appropriate <code>walkthrough</code> branch:</p>
<pre><code class="language-nohighlight">$ git checkout walkthrough3
Branch walkthrough3 set up to track remote branch walkthrough3 from origin.
Switched to a new branch 'walkthrough3'</code></pre>
<aside class="aside-note">
<p>Before doing this, you will want to make sure you do not have any uncommitted changes.</p>
</aside>
<p>The main things we will do during today's walkthrough are:</p>
<ol>
<li>Write a function via which we can fetch the user's (pretend) current watchlist.
<ul>
<li>Rather than hard-code the movie titles directly into our dropdown menu, we will dynamically build the dropdown based on the current list.</li>
<li>In the process, we will see a new Python function, the <code>str.format</code> method.</li>
</ul></li>
<li>The main feature we will add is the inclusion of some validation on the <code>crossoff/</code> route method:
<ul>
<li>When the user wants to take a movie they have watched off their list, we will make sure the movie is actually on the user's list in the first place.</li>
<li>If not, we will <em>redirect</em> the user back to the home page.
<ul>
<li>And we will pass along a helpful error message as a <em>query parameter</em> in the URL
<ul>
<li>But spaces aren't allowed in URLs! So we'll need to <em>escape</em> the error message</li>
</ul></li>
</ul></li>
<li>Back on the homepage, we will display the error message, if it exists.</li>
</ul></li>
<li>We will also answer the following question: Why is this back-end validation necessary? Doesn't the dropdown menu on the front-end already prevent the user from choosing a movie that isn't on their list?</li>
</ol>
<h2 id="studio">Studio</h2>
<p>For the Studio, your job is to include some validation on the <code>/add</code> route, to make sure the app responds appropriately no matter what the user has typed into that form.</p>
<h3 id="checking-out-the-studio-code">Checking out the Studio code</h3>
<p>As usual, you should commit any uncommitted changes (if you have any), and then <code>checkout</code> today's studio branch:</p>
<pre><code class="language-nohighlight">$ git checkout studio3
Branch studio3 set up to track remote branch studio3 from origin.
Switched to a new branch 'studio3'</code></pre>
<p>Next time, we will start to ween you off of these specific commands, and simply refer you to <a href="../getting-the-code/">generic instructions for checking out the starter code</a>.</p>
<h3 id="your-task">Your Task</h3>
<p>As mentioned, your job is to provide more validation of the user's input. There are three things that might go wrong:</p>
<ol>
<li>
<p>The user might try to add a so-called &quot;movie&quot; whose title is something like <code>"&lt;button&gt;Hacker Apocalypse&lt;/button&gt;"</code>. You can try this now and see for yourself what happens... the confirmation page will actually contain a real button! That's not good.</p>
<p>Use the <code>escape</code> function from the <code>cgi</code> module in order to ensure that the user's input is properly escaped from the HMTL context.</p>
</li>
<li>
<p>The user might fail to type anything at all, and then click the <code>Add It</code> button. If the user does not specify a movie, then you should reject their form submission, and redirect them back to the home page, with an error message that says something like</p>
<blockquote>
<p>Please specify the name of the movie you want to add</p>
</blockquote>
</li>
<li>
<p>The user might try to add a movie that <a href="https://www.youtube.com/watch?v=dPxI4yOKdgc">sucks</a>. Indeed, your users don't always know what's in their best interest, and there are times when it is best to intervene. Near the top of your <code>main.py</code> file you will see a variable called <code>terrible_movies</code>, which defines a list of movies that should be absolutely forbidden. If the user tries to add one of the movies in that list, you should redirect them back to the homepage with an error message that says something like:</p>
<blockquote>
<p>Trust me, you don't want to add 'Nine Lives' to your Watchlist.</p>
</blockquote>
</li>
</ol>
                                    </section>

            </div>
        </main>

        <script type="text/javascript" src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
        <script type="text/javascript" src="/js/bootstrap.min.js"></script>
        <script type="text/javascript" src="/js/highlight.pack.js"></script>
        <script type="text/javascript" src="/js/libgif.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.5.3/vue.min.js"></script>

        <script>
            $(function() {
                $("section>h1").wrap('<div class="page-header" />');

                // Syntax highlighting
                hljs.configure({ displayLabels: true });
                hljs.initHighlightingOnLoad();
            });
        </script>
        <script>
            $(function() {
                if (!location.pathname.match(/class-prep/)) return;

                window.checkboxWatcher = new Vue({
                    el: '#content',
                    data: function() {
                        var storedValue = localStorage.getItem('completedChecks');
                        console.log('storedValue', storedValue);
                        var hydratedValue = storedValue ? JSON.parse(storedValue) : {};
                        return {
                            checks: hydratedValue,
                        };
                    },
                    watch: {
                        checks: {
                            handler: function() {
                                console.log('storing check state');
                                localStorage.setItem('completedChecks', JSON.stringify(this.checks));
                            },
                            deep: true,
                        },
                    },
                });
            });
        </script>
        
    </body>
</html>
